const a0_0x4f627e=a0_0x3ca5;(function(_0x5f13aa,_0x7f04c7){const _0x288a5=a0_0x3ca5,_0x427e70=_0x5f13aa();while(!![]){try{const _0xab96d3=parseInt(_0x288a5(0x19a))/0x1*(-parseInt(_0x288a5(0x189))/0x2)+-parseInt(_0x288a5(0x197))/0x3+parseInt(_0x288a5(0x17e))/0x4+parseInt(_0x288a5(0x1b8))/0x5*(-parseInt(_0x288a5(0x180))/0x6)+-parseInt(_0x288a5(0x1c0))/0x7*(-parseInt(_0x288a5(0x177))/0x8)+-parseInt(_0x288a5(0x17b))/0x9+-parseInt(_0x288a5(0x1bc))/0xa*(-parseInt(_0x288a5(0x191))/0xb);if(_0xab96d3===_0x7f04c7)break;else _0x427e70['push'](_0x427e70['shift']());}catch(_0xeac69){_0x427e70['push'](_0x427e70['shift']());}}}(a0_0x42f1,0x387ad));let attachment={},rec,rec_blob,timeout_id_attachment;$(a0_0x4f627e(0x1a9))['on'](a0_0x4f627e(0x1a6),()=>{const _0x4fdbbc=a0_0x4f627e;$(_0x4fdbbc(0x187))['css'](_0x4fdbbc(0x17a),_0x4fdbbc(0x18a)),$(_0x4fdbbc(0x186))[_0x4fdbbc(0x18c)](_0x4fdbbc(0x1b2))[_0x4fdbbc(0x196)](),timeout_id_attachment=setInterval(()=>{const _0x40488b=_0x4fdbbc;let _0x3d61a3=String(editor[_0x40488b(0x179)]()[_0x40488b(0x1bb)]+0x1),_0x5d5bf6=curfile;attachment[_0x40488b(0x182)]=$(_0x40488b(0x188))[_0x40488b(0x1b6)](_0x5d5bf6),attachment[_0x40488b(0x1b3)]=$(_0x40488b(0x18e))[_0x40488b(0x1b6)](_0x3d61a3);},0x64),$(_0x4fdbbc(0x193))['val'](_0x4fdbbc(0x18b));}),$(a0_0x4f627e(0x183))['on'](a0_0x4f627e(0x1a6),_0x18cc57=>{const _0x4432cb=a0_0x4f627e;_0x18cc57[_0x4432cb(0x1a3)](),attachment[_0x4432cb(0x182)]=$(_0x4432cb(0x188))[_0x4432cb(0x1b6)](),$(_0x4432cb(0x188))['val'](''),attachment[_0x4432cb(0x1b3)]=$('#attach_line')[_0x4432cb(0x1b6)](),$(_0x4432cb(0x18e))[_0x4432cb(0x1b6)](''),attachment[_0x4432cb(0x184)]=$(_0x4432cb(0x193))[_0x4432cb(0x1b6)](),$(_0x4432cb(0x193))['val']('');if($('#attachment')[_0x4432cb(0x1b6)]()!='')uploade_attachment(),$('#attach')[_0x4432cb(0x1a8)](_0x4432cb(0x17a),'none');else rec_blob?(upload_rec(),$(_0x4432cb(0x187))[_0x4432cb(0x1a8)](_0x4432cb(0x17a),'none')):alert(_0x4432cb(0x1bf));attachment[_0x4432cb(0x184)]==''&&alert(_0x4432cb(0x19f));}),$(a0_0x4f627e(0x192))['on'](a0_0x4f627e(0x1a6),()=>{const _0x1b7759=a0_0x4f627e;clearInterval(timeout_id_attachment),$(_0x1b7759(0x187))[_0x1b7759(0x1a8)](_0x1b7759(0x17a),_0x1b7759(0x1a1));});function uploade_attachment(){const _0xecdd1e=a0_0x4f627e;var _0xa55bc8=new FormData();_0xa55bc8[_0xecdd1e(0x1b7)]('name',attachment[_0xecdd1e(0x182)]),_0xa55bc8[_0xecdd1e(0x1b7)](_0xecdd1e(0x178),attachment[_0xecdd1e(0x1b3)]),_0xa55bc8[_0xecdd1e(0x1b7)]('id',id),_0xa55bc8[_0xecdd1e(0x1b7)](_0xecdd1e(0x1ab),attachment[_0xecdd1e(0x19b)]),_0xa55bc8['append'](_0xecdd1e(0x17d),attachment[_0xecdd1e(0x184)]),$['ajax']({'url':window['origin']+'/main/upload_attachment','type':_0xecdd1e(0x1be),'dataType':_0xecdd1e(0x1b9),'cache':![],'contentType':![],'processData':![],'data':_0xa55bc8,'success':function(){}});}function text_attachment_show(_0x4ef75e){const _0x13365e=a0_0x4f627e;let _0x28ecc1=$(_0x13365e(0x1ac)+_0x4ef75e+_0x13365e(0x181));$(_0x13365e(0x1a5))[_0x13365e(0x1a2)](),$(_0x13365e(0x1a5))[_0x13365e(0x1b7)](_0x28ecc1);}function a0_0x3ca5(_0x24a7a8,_0x6b514a){const _0x42f195=a0_0x42f1();return a0_0x3ca5=function(_0x3ca522,_0x24d026){_0x3ca522=_0x3ca522-0x177;let _0x11d0cd=_0x42f195[_0x3ca522];return _0x11d0cd;},a0_0x3ca5(_0x24a7a8,_0x6b514a);}function img_attachment_show(_0x346c03,_0x5a3d54){const _0x23acfc=a0_0x4f627e;let _0x52945c=$(_0x23acfc(0x1a0));$('#show_attachment')[_0x23acfc(0x1a2)](),_0x52945c[_0x23acfc(0x194)](_0x23acfc(0x17f),window['origin']+_0x23acfc(0x1a7)+id+'/'+(_0x346c03+_0x5a3d54)),$(_0x23acfc(0x1a5))[_0x23acfc(0x1b7)](_0x52945c);}function audio_attachment_show(_0xbefe9f,_0x5f4c09){const _0x5626a5=a0_0x4f627e;let _0x27bb28=$('<audio\x20\x20\x20\x20\x20\x20\x20\x20controls\x20\x20\x20\x20</audio>');$('#show_attachment')[_0x5626a5(0x1a2)](),_0x27bb28['attr'](_0x5626a5(0x17f),window[_0x5626a5(0x19e)]+_0x5626a5(0x1a7)+id+'/'+(_0xbefe9f+_0x5f4c09)),$(_0x5626a5(0x1a5))[_0x5626a5(0x1b7)](_0x27bb28);}function video_attachment_show(_0x25b45a,_0x40eb86){const _0x4067c4=a0_0x4f627e;let _0x505e45=$(_0x4067c4(0x195));$(_0x4067c4(0x1a5))['empty'](),_0x505e45[_0x4067c4(0x194)](_0x4067c4(0x17f),window['origin']+_0x4067c4(0x1a7)+id+'/'+(_0x25b45a+_0x40eb86)),$(_0x4067c4(0x1a5))['append'](_0x505e45);}function if_have_attachment(_0x24a9ff,_0x41ff00){const _0x5bf25a=a0_0x4f627e;var _0x4c4118=new FormData();_0x4c4118[_0x5bf25a(0x1b7)](_0x5bf25a(0x1ad),_0x24a9ff),_0x4c4118['append'](_0x5bf25a(0x178),_0x41ff00),_0x4c4118['append']('id',id),$[_0x5bf25a(0x1b5)]({'url':window[_0x5bf25a(0x19e)]+_0x5bf25a(0x1af),'type':_0x5bf25a(0x1be),'dataType':_0x5bf25a(0x1b9),'cache':![],'contentType':![],'processData':![],'data':_0x4c4118,'success':function(_0x3ddbb5){const _0x2ff31f=_0x5bf25a;if(_0x3ddbb5['is']){if(_0x3ddbb5[_0x2ff31f(0x19b)]!='')text_attachment_show(_0x3ddbb5[_0x2ff31f(0x19b)]);else{if(_0x3ddbb5['type']['indexOf'](_0x2ff31f(0x1ba))!=-0x1)img_attachment_show(_0x24a9ff,_0x41ff00);else{if(_0x3ddbb5[_0x2ff31f(0x1bd)][_0x2ff31f(0x17c)](_0x2ff31f(0x1b2))!=-0x1)audio_attachment_show(_0x24a9ff,_0x41ff00);else _0x3ddbb5[_0x2ff31f(0x1bd)][_0x2ff31f(0x17c)]('video')!=-0x1&&video_attachment_show(_0x24a9ff,_0x41ff00);}}}else text_attachment_show(_0x2ff31f(0x199));}});}function a0_0x42f1(){const _0x8501b=['#attach_cancel','#attach_des','attr','<video\x20\x20\x20\x20\x20\x20\x20\x20controls\x20\x20\x20\x20</video>','remove','399897RMurlr','#attachment','no\x20attachment','24lpokrR','data','files','target','origin','请填写附件的描述','<img>','none','empty','preventDefault','#start_rec','#show_attachment','click','/main/attachment/','css','#attach_file','<audio\x20\x20\x20\x20\x20\x20\x20\x20controls\x20\x20\x20\x20</audio>','file','<p>','name','open','/main/ask_attachment','stop','40px','audio','fileline','start','ajax','val','append','5whesHE','json','image','row','5453750lOQaIY','type','POST','请选择文件或者录音!','707uFFSes','14000NuaLej','line','getCursorPosition','display','566307CwwwRy','indexOf','des','744336uTSLzx','src','1092084RtfSbC','</p>','filename','#attach_submit','filedes','录音失败:','#rec_audio','#attach','#attach_code_file','24886kwDIHM','flex','请填写对于附件的描述','children','recorder.mp3','#attach_line','change','无法录音:','11aQusGO'];a0_0x42f1=function(){return _0x8501b;};return a0_0x42f1();}$(a0_0x4f627e(0x198))['on'](a0_0x4f627e(0x18f),_0x41eac5=>{const _0x275eea=a0_0x4f627e;let _0x4ad229=_0x41eac5[_0x275eea(0x19d)][_0x275eea(0x19c)];console['log'](_0x4ad229);if(_0x4ad229['length']==0x0)return;attachment[_0x275eea(0x1ad)]=_0x4ad229[0x0]['name'],attachment[_0x275eea(0x19b)]=_0x4ad229[0x0];}),$(a0_0x4f627e(0x1a4))['on'](a0_0x4f627e(0x1a6),()=>{const _0x40c382=a0_0x4f627e;rec=Recorder(),rec[_0x40c382(0x1ae)](function(){const _0xa62999=_0x40c382;rec[_0xa62999(0x1b4)]();},function(_0x58c0f1,_0x5b7c46){const _0x5ab3b2=_0x40c382;alert((_0x5b7c46?'用户拒绝了权限，':'')+_0x5ab3b2(0x190)+_0x58c0f1);});}),$('#end_rec')['on'](a0_0x4f627e(0x1a6),()=>{const _0x2fa695=a0_0x4f627e;rec[_0x2fa695(0x1b0)](function(_0x1b1295,_0xf95505){const _0xe4927d=_0x2fa695;rec_blob=_0x1b1295;let _0x46ab27=$(_0xe4927d(0x1aa));_0x46ab27[_0xe4927d(0x194)](_0xe4927d(0x17f),URL['createObjectURL'](_0x1b1295)),$('#rec_audio')['append'](_0x46ab27),_0x46ab27[_0xe4927d(0x1a8)]('height',_0xe4927d(0x1b1)),rec['close']();},function(_0x38b80f){const _0x5aeea5=_0x2fa695;alert(_0x5aeea5(0x185)+_0x38b80f);});});function upload_rec(){const _0xf10a13=a0_0x4f627e;var _0x52ac8f=new FormData();_0x52ac8f[_0xf10a13(0x1b7)]('name',attachment[_0xf10a13(0x182)]),_0x52ac8f['append'](_0xf10a13(0x178),attachment[_0xf10a13(0x1b3)]),_0x52ac8f[_0xf10a13(0x1b7)](_0xf10a13(0x17d),attachment['filedes']),_0x52ac8f[_0xf10a13(0x1b7)]('id',id),_0x52ac8f['append'](_0xf10a13(0x1ab),rec_blob,_0xf10a13(0x18d)),$[_0xf10a13(0x1b5)]({'url':window[_0xf10a13(0x19e)]+'/main/upload_attachment','type':_0xf10a13(0x1be),'dataType':'json','cache':![],'contentType':![],'processData':![],'data':_0x52ac8f});}